{% extends "master.html" %}
{% block header %}

	<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
	<script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
	<script >
	function initialize() {
		var myLatlng = new google.maps.LatLng(-2.524406, -78.929772);
		var mapOptions = {
		zoom: 7,
		center: myLatlng

		}
		var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
		{% for empresa in empresas %}
			var marcador = new google.maps.LatLng({{empresa.latitud}}, {{empresa.longitud}});
			var marker = new google.maps.Marker({
			position: marcador,
			map: map,
			title: '{{empresa.nombre}}'
			});
			google.maps.event.addListener(marker, 'click', function(){
				var popup = new google.maps.InfoWindow();
				var note = '<h6>{{empresa.nombre}}</h6>{{empresa.descripcion}}  <p><b>Correo: </b>{{empresa.email}} <b>Telefono: </b>{{empresa.telefono}}</p>';
				popup.setContent(note);
				popup.open(map, this);
			})
		{% endfor %}
	}
	google.maps.event.addDomListener(window, 'load', initialize);
	</script>
{% endblock %}

{% block content %}
<h2>Mapa de Geolocalizacion de Empresas</h2>
<section id="map-canvas"></section>
{% endblock %}
